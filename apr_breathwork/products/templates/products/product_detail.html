{% extends "base.html" %}
{% load static %}

{% block page_header %}
    {% include 'layout/header-padding.html'%}
{% endblock%}

{% block content %}
    <div class="overlay"></div>
    <div class="container-fluid">
        <div class="row">
            {% include 'products/components/product-image.html'%}
            <div class="col-12 col-md-6 col-lg-4">
                <div class="product-details-container mb-5 mt-md-5">
                    {% include 'products/components/product-info.html'%} 
                    {% include 'products/components/product-shopping-form.html'%}
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block postloadjs %}
<script type="text/javascript">
    // Fixes Duplicate dates when more than one time available for date//
    // https://stackoverflow.com/questions/22905769/remove-duplicate-options-from-html-select //
    var usedNames = {};
    $("select[name='date'] > option").each(function () {
        if(usedNames[this.text]) {
            $(this).remove();
        } else {
            usedNames[this.text] = this.value;
        }
    });

    // Listens for selected date and shows/hides appropriate times //
    var dateSelector = document.getElementById("date");
    var timeSelector = document.getElementById("time");
    dateSelector.addEventListener("change", function() {
        chosenDate = dateSelector.options[dateSelector.selectedIndex].value;
        for (var i=0; i<timeSelector.length; i++) {
            if (timeSelector.options[i].id == chosenDate) {
                timeSelector.options[i].classList.remove("d-none");
            }
            else {
                timeSelector.options[i].classList.add("d-none");
            }
        }
    });
</script>
{% endblock %}